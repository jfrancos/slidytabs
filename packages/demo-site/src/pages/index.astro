---
import { Code } from "astro:components";
import Demos from "@/components/Demos.astro";
import { icons } from "@/lib/utils";
import { getCollection } from "astro:content";
import "github-markdown-css/github-markdown.css";

const { github } = icons;
const readme = await getCollection("readme");
const sections = Object.fromEntries(
  readme.map(({ id, rendered }) => [id, rendered?.html])
);
const exampleCollection = await getCollection("examples");
const exampleText = Object.fromEntries(
  exampleCollection.map(({ id, rendered }) => [id, rendered?.html])
);
---

<html lang="en" class="h-screen">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content={Astro.generator} />
    <title>slidytabs</title>
  </head>
  <body class="flex flex-col h-screen bg-white">
    <div class="py-6 bg-zinc-200 color-zinc-700 flex gap-2">
      <div
        class="max-w-217 mx-auto w-full px-4 md:px-12 flex justify-between items-center"
      >
        <div class="flex flex-col">
          <div class="font-semibold color-pink-700 text-32px">slidytabs</div>
          <div class="text-balance">
            A DOM-level utility for animating <span class="font-semibold"
              >shadcn</span
            >&ensp;
            <Code
              code="<Tabs />"
              lang="jsx"
              theme="github-light"
              class="text-xs text-nowrap inline p-1 -m-1 rounded-sm"
            />
          </div>
        </div>
        <a
          href="https://github.com/jfrancos/slidytabs"
          class="hover:bg-zinc-300 p-2 -m-2 rounded-full transition-colors"
          target="_blank"
          rel="noreferer"
        >
          <div class:list={[github, "text-lg"]}></div>
        </a>
      </div>
    </div>

    <div
      class="flex flex-col .gap-8 .py-6 mx-auto w-full max-w-217 px-4 md:px-12"
    >
      <div class="markdown-body [&_pre]:bg-muted!">
        <section set:html={sections["## Why this exists"]} />
        <section set:html={sections["## Install"]} />
        <section set:html={sections["## Usage"]} />
        <section set:html={sections["### Make tabs slide with `tabs()`"]} />
        <h4>Examples</h4>
        <p set:html={exampleText["Tabs"]} />
      </div>
      <Demos filename="Tabs" />
      <div class="markdown-body">
        <p set:html={exampleText["ShadcnControlled"]} />
      </div>
      <Demos filename="ShadcnControlled" />
      <div class="markdown-body">
        <p set:html={exampleText["SlidytabsControlled"]} />
      </div>
      <Demos filename="SlidytabsControlled" />
      <div class="markdown-body [&_pre]:bg-muted!">
        <section
          set:html={sections["### Make tabs a slider with `slider()`"]}
        />
        <h4>Examples</h4>
        <p set:html={exampleText["Slider"]} />
      </div>
      <Demos filename="Slider" />
      <div class="markdown-body">
        <p set:html={exampleText["Sticky"]} />
      </div>
      <Demos filename="Sticky" />
      <div class="markdown-body">
        <p set:html={exampleText["Vertical"]} />
      </div>
      <Demos filename="Vertical" />

      <div class="markdown-body [&_pre]:bg-muted!">
        <section
          set:html={sections["### Make tabs a range slider with `range()`"]}
        />
        <h4>Examples</h4>
        <p set:html={exampleText["Range"]} />
      </div>
      <Demos filename="Range" />
      <div class="markdown-body">
        <p set:html={exampleText["Push"]} />
      </div>
      <Demos filename="Push" />
      <div class="markdown-body">
        <section set:html={sections["## Bugs"]} />
      </div>
    </div>
  </body>
</html>
