---
import { Code } from "astro:components";
import Demos from "@/components/Demos.astro";
import { icons } from "@/lib/utils";
import JSX from "@/components/InlineJSX.astro";
const { github } = icons;
import ReadmeSection from "@/components/ReadmeSection.astro";
import { getCollection } from "astro:content";
import "github-markdown-css/github-markdown.css";
const readme = await getCollection("readme");
const sections = Object.fromEntries(
  readme.map(({ id, rendered }) => [id, rendered?.html])
);
---

<html lang="en" class="h-screen">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content={Astro.generator} />
    <title>slidytabs</title>
  </head>
  <body class="flex flex-col h-screen bg-white">
    <div class="px-8 py-6 bg-neutral-200 color-neutral-700 flex flex-col gap-2">
      <div class="flex justify-between .h-9">
        <div class="font-semibold color-pink-700 .tracking-wide text-3xl">
          slidytabs
        </div>
        <div class="flex items-center gap-8 h-9">
          <a
            href="https://github.com/jfrancos/slidytabs"
            class="hover:bg-neutral-300 p-2 -m-2 rounded-full transition-colors"
            target="_blank"
            rel="noreferer"
          >
            <div class:list={[github, ".text-lg"]}></div>
          </a>
        </div>
      </div>
      <div class="text-balance">
        A DOM-level utility for animating <span class="font-semibold"
          >shadcn</span
        >&ensp;
        <Code
          code="<Tabs />"
          lang="jsx"
          theme="github-light"
          class="text-xs text-nowrap inline p-1 -m-1 rounded-sm"
        />
      </div>
    </div>

    <div
      class="flex flex-col .gap-8 .py-6 mx-auto w-full max-w-217 px-4 md:px-12"
    >
      <!-- <div class="markdown-body" set:html={sections["## Install"]} /> -->

      <div class="markdown-body">
        <section set:html={sections["## Install"]} />
        <section set:html={sections["## Usage"]} />
      </div>
      <div class="markdown-body">
      </div>

      <!-- <div class="markdown-body" set:html={sections["## Usage"]} /> -->

      <!-- <ReadmeSection section="## Install" /> -->
      <!-- <ReadmeSection section="## Usage" /> -->

      <ReadmeSection section="### Make tabs slide with `tabs()`" />
      <div class="prose max-w-none">
        <h4>Examples</h4>
      </div>
      <Demos filename="Tabs">
        Use <JSX code="shadcn" /> Tabs the way you normally would, and let your framework
        pass the root <JSX code="Tabs" /> element to <JSX code="slidytabs" />.
      </Demos>
      <Demos filename="ShadcnControlled">
        You can control the value via the usual <JSX code="shadcn" /> props.
      </Demos>
      <Demos filename="SlidytabsControlled">
        Alternatively, with <JSX code="slidytabs" />, you can control it using
        indices. Setting <JSX code="defaultValue" /> helps avoid a flash during hydration.
      </Demos>

      <ReadmeSection section="### Make tabs a slider with `slider()`" />
      <div class="prose max-w-none">
        <h4>Examples</h4>
      </div>
      <Demos filename="Slider">
        Same usage as above, with drag support. This example goes deeper into
        controlled usage and explores some custom styling.
      </Demos>
      <Demos filename="Sticky">
        The <JSX code="sticky" /> param lets you define a permanent endpoint, while
        still passing around a single index.
      </Demos>
      <Demos filename="Vertical"> A vertical example </Demos>

      <ReadmeSection section="### Make tabs a range slider with `range()`" />
      <div class="prose max-w-none">
        <h4>Examples</h4>
      </div>
      <Demos filename="Range">
        Similar usage as above, but now we're passing around tuples (<JSX
          code="[number, number]"
        />).
      </Demos>
      <Demos filename="Push">
        Use <JSX code="push" /> to let one endpoint push the other.
      </Demos>
    </div>
  </body>
</html>
