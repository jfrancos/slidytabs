---
import Code from "./Code.astro";
import SvelteShell from "./svelte/Shell.svelte";
import TsxShell from "./tsx/Shell.tsx";

const { filename, highlight, lang } = Astro.props;
const { default: Component } = await import(
  `./${lang}/examples/${filename}.${lang}`
);
const { default: code } = await import(
  `./${lang}/examples/${filename}.${lang}?raw`
);

const logos = {
  "i-logos:react": lang === "tsx",
  "i-logos:svelte-icon": lang === "svelte",
};
---

<div class="flex flex-col border-gray-100 border-4 rounded-lg w-xl relative">
  <div class:list={[logos, "absolute right-4 top-4 text-xl"]}></div>
  <div class="flex justify-center h-32 items-center">
    {lang === "svelte" && <SvelteShell {filename} client:idle />}
    {lang === "tsx" && <TsxShell {filename} client:idle />}
    <!-- flash between SSR awaited component and client awaited component so we
    have both simultaneously and hide the SSR once the client is visible -->
    <div class="[:has(*)~&]:hidden">
      <Component />
    </div>
  </div>
  <Code {highlight} {code} {lang} />
</div>
